<analysis>**original_problem_statement:**
The user's initial request was to fix a failing MT4 account connection. This quickly pivoted to a high-priority feature request: create a completely new, standalone VIKING trading analytics dashboard, separate from the existing FIDUS platform.

PRODUCT REQUIREMENTS:
-   **Separate Application:** VIKING should be a distinct application, accessible at its own URL (), with its own login page and credentials. It must be completely isolated from the FIDUS funds and data.
-   **MT4 Integration:** The dashboard must sync real-time data from a VIKING CORE MT4 account (33627673). A second PRO account (1309411) is planned for the future.
-   **UI/UX:** The UI must follow the format and layout of an FXBlue analytics page, as specified by the user. It needs to have multiple tabs: Overview, Analysis, Stats, Risk, and Orders.
-   **Branding:** The application must use the branding (dark theme, gold/amber accents, and logo) from the website .
-   **Backend:** New API endpoints and MongoDB collections (, , ) must be created to support the VIKING dashboard.
-   **Analytics:** The backend must calculate a comprehensive set of trading metrics (Total Return, Profit Factor, Drawdown, etc.) from the trade history.

**User's preferred language**: English

**what currently exists?**
A full-stack application (React + FastAPI + MongoDB). The main FIDUS application exists at the root URL, and a new, completely separate VIKING application has been created and is accessible at the  route.

-   **VIKING Frontend:** A standalone VIKING app has been built with its own login page () and dashboard (). It has been styled with a dark theme, gold accents, and the official VIKING logo to match the  branding. The dashboard includes the required tab structure and fetches live data from the backend.
-   **VIKING Backend:** New API endpoints under  have been created to serve data and analytics. An analytics calculation engine has been implemented in .
-   **VIKING MT4 Bridge:** A new, isolated MT4 bridge is fully operational. It consists of an MQL4 Expert Advisor () running on the user's VPS, which sends data via HTTP POST to a dedicated Python service (). This service writes the data directly to the new  and  MongoDB collections. The user has confirmed data is flowing successfully.

**Last working item**:
-   **Last item agent was working:** Applying the VIKING branding (dark theme, gold/amber accents, and logo) to the standalone VIKING application. This involved modifying , , and .
-   **Status:** IN PROGRESS
-   **Agent Testing Done:** N
-   **Which testing method agent to use?** screenshot tool. A visual confirmation is needed to ensure the new branding has been applied correctly across the entire VIKING user flow.
-   **User Testing Done:** N

**All Pending/In progress Issue list**:
-   There are no blocking issues. The primary focus is completing the VIKING feature set.

**In progress Task List**:
-   **Task 1: Verify VIKING application branding (P0)**
    -   **Where to resume:** The branding styles have been applied to the code. The next step is to test the visual output.
    -   **What will be achieved with this?** Confirm that the VIKING login page and dashboard correctly display the new dark theme, gold/amber accents, and the official logo.
    -   **Status:** TESTING PENDING
    -   **Should Test frontend/backend/both after fix?** Frontend.
    -   **Blocked on something:** None.

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   **(P0) Fully Implement Analytics UI:** The backend calculates many metrics, but the , , and  tabs on the frontend () still contain many placeholder elements. These need to be wired up to display the real analytics data (e.g., Symbol Distribution Pie Chart, Risk of Ruin table, detailed stats tables).
    -   **(P1) Display Deal History:** The  tab in  needs to be implemented to fetch and display the list of closed trades from the  collection.
-   **Future Tasks:**
    -   **(P2) Setup Traders Trust PRO account (1309411):** The user has explicitly postponed this. It will involve installing a new MT4 terminal on the VPS and configuring the bridge for the second account.
    -   **(P2) Refactor VIKING Components:** The  component is large and could be broken down into smaller components for each tab. The  route could also be refactored to move analytics logic into a  module.
    -   **(P2) FIDUS-related tasks:** Several older tasks related to the FIDUS part of the application remain, such as code cleanup and fixing minor bugs (e.g., Lucrum MT5 Bridge Has Duplicate Key Errors).

**Completed work in this session**
-   **VIKING Standalone Application:** Created a completely separate application at  with its own login and dashboard. (, , )
-   **VIKING Backend & Analytics:** Built all necessary API endpoints () and an analytics calculation engine. ()
-   **VIKING MT4 Bridge:** Successfully created, deployed, and debugged a new, isolated MT4 bridge (EA + Python service) to sync live trading data to MongoDB.
-   **Live Data Integration:** Connected the VIKING frontend to the backend to display live account data and charts.
-   **VIKING Branding:** Styled the entire VIKING application with a dark theme, gold accents, and the official logo to match .

**Earlier issues found/mentioned but not fixed**
-   **Issue 1: Lucrum MT5 Bridge Has Duplicate Key Errors (P2)**
    -   **Debug checklist:** Investigate  on the VPS to find the cause of  failures.
    -   **Why to solve this issue and what will be achieved with this?** Ensures complete historical deal data for Lucrum accounts.
    -   **Should Test frontend/backend/both after fix:** Backend.
    -   **Is recurring issue?** Y
-   **Issue 2: Failing logins for three specific referral agents (P2)**
    -   **Debug checklist:** Check  and  collections in the database for the affected agents.
    -   **Why to solve this issue and what will be achieved with this?** Ensures all referral agents can access their dashboards.
    -   **Should Test frontend/backend/both after fix:** Backend (API) and Frontend (login flow).
    -   **Is recurring issue?** N

**Known issue recurrence from previous fork**
-   None.

**Code Architecture**


**Key Technical Concepts**
-   **Application Splitting:** The React app now serves two applications based on URL: the original FIDUS app at  and the new VIKING portal at .
-   **MT4 Integration:** An isolated data bridge was created using an MQL4 Expert Advisor (EA) that sends data via HTTP POST to a Python FastAPI service, which then writes to MongoDB.
-   **UI Branding:** The VIKING app was themed using Tailwind CSS to match an external website's branding (dark theme, specific colors, and logo).

**key DB schema**
-   : { , , , , , ,  }
-   : { , , , , , ,  }
-   : { , , , ,  }

**changes in tech stack**
-   None.

**All files of reference**
-   : Modified to add the  route.
-   : New file; wrapper for the standalone VIKING application.
-   : New file; the login page for the VIKING portal.
-   : New file; the main UI for the VIKING dashboard.
-   : New file; contains all API endpoints and analytics logic for VIKING.
-   : New file; the Expert Advisor that runs in the MT4 terminal.
-   : New file; the Python service that receives data from the EA.
-   : New file; the GitHub Action to deploy the bridge.

**Areas that need refactoring**:
-   The  component is over 800 lines long and handles all 5 tabs. It should be broken down into smaller, more manageable sub-components.
-   The analytics calculation logic within  could be abstracted into a separate  module for better separation of concerns.

**key api endpoints**
-   : Receives live account data from the MT4 EA.
-   : Receives historical trade data from the MT4 EA.
-   : Provides frontend with combined account and analytics data.
-   : Triggers an on-demand calculation of all trading metrics.

**Critical Info for New Agent**
-   The project has pivoted to focus exclusively on the **VIKING** application. Do not work on FIDUS unless specifically instructed.
-   The application is now split: FIDUS is at the root URL (), and VIKING is at .
-   The VIKING MT4 data bridge is **live and operational**. The dashboard should be receiving real data.
-   The user has postponed work on the second VIKING PRO account. Focus only on the VIKING CORE account (33627673).
-   The next priority is to complete the UI for the analytics features that are already built on the backend.

**documents and test reports created in this job**
-    (created and updated with VIKING requirements)
-    (instructions for the MT4 bridge)

**Last 10 User Messages and any pending HUMAN messages**
1.  **User:** Reports GitHub Actions deployment workflow is failing. (COMPLETED - Agent fixed it)
2.  **User:** Asks for the  file content to manually create it on the VPS. (COMPLETED - Agent provided it)
3.  **User:** Reports MongoDB authentication is failing on the VPS Python service. (COMPLETED - Agent debugged and provided corrected files/credentials)
4.  **User:** Confirms the Python service is running and the bridge is operational. Asks to set up auto-start. (COMPLETED - Agent provided the script)
5.  **User:** Confirms auto-start is done. Asks to proceed with adding real-time charts and analytics to the dashboard. (COMPLETED - Agent implemented this)
6.  **User:** Sees live data flowing and asks to create a separate login for VIKING on a separate domain/URL. (COMPLETED - Agent created the  route and standalone app)
7.  **User:** Asks to use the branding and logo from . (COMPLETED - Agent implemented the branding)

**Project Health Check:**
-   **Broken**: None.
-   **Mocked**: Several UI sections within the VIKING dashboard (, ,  tabs) are placeholders and need to be connected to the full analytics data provided by the backend.

**3rd Party Integrations**
-   **Render:** Used for hosting and deployment.
-   **MongoDB Atlas:** Production database.
-   **GitHub Actions:** Used for custom deployment workflows.

**Testing status**
-   **Testing agent used after significant changes:** NO
-   **Troubleshoot agent used after agent stuck in loop:** NO
-   **Test files created:** None.
-   **Known regressions:** None.

**Credentials to test flow:**
-   **FIDUS Admin:**  / 
-   **VIKING Admin:**  / 

**What agent forgot to execute**
-   The agent did not perform a final visual test (e.g., via screenshot) after applying the last set of branding and styling changes to the VIKING application components. This verification is the immediate next step.</analysis>
